jQuery(document).ready(function(r){r(".thb-register:not(.disabled)").on("click",function(e){var t=r(this),a=r("#thb_product_key").val(),o=r("#thb_purchase_code").val(),d=t.hasClass("thb_purchase_code"),n=d?t.data("verify-by-purchase"):t.data("verify"),s={domain:t.data("domain")};return d?s.purchase_code=o:s.product_key=a,r.ajax({method:"GET",url:n,data:s,beforeSend:function(){t.addClass("disabled")},error:function(e){if(t.removeClass("disabled"),e.responseText){var a=r.parseJSON(e.responseText);a.error_message&&r("#thb_error_messages").html("<p>"+a.error_message+"</p>")}},success:function(e){e.product_key&&(a=e.product_key),r.ajax(ajaxurl,{method:"POST",data:{action:"thb_update_options",key:a,expired:0},success:function(){location.reload()}})}}),!1}),r(".thb-delete-key").on("click",function(e){r(this);return r.ajax(ajaxurl,{method:"POST",data:{action:"thb_update_options",key:"",expired:0},success:function(){location.reload()}}),!1});var d=new FormData;"undefined"!=typeof ocdi&&(d.append("action","ocdi_import_demo_data"),d.append("security",ocdi.ajax_nonce)),r(".thb-load-demo:not(.disabled)").on("click",function(e){var a=r(this),t=a.parents(".theme"),o=a.data("demo");t.addClass("loading"),r(".thb-load-demo").addClass("disabled").attr("disabled","disabled").unbind("click"),d.append("selected",o),function t(o){r.ajax({method:"POST",url:ocdi.ajax_url,data:o,contentType:!1,processData:!1}).done(function(e){if(void 0!==e.status&&"newAJAX"===e.status)t(o);else if(void 0!==e.status&&"afterAllImportAJAX"===e.status){var a=new FormData;a.append("action","ocdi_after_import_data"),a.append("security",ocdi.ajax_nonce),t(a)}else location.reload()})}(d),e.preventDefault()})});